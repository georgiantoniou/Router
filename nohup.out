  File "./run_experiment.py", line 199
    def fix_mem_conf(container_id, memcached-conf):
                                            ^
SyntaxError: invalid syntax
  File "./run_experiment.py", line 480
    client_conf.set(router_qps', qps)
                                    ^
SyntaxError: EOL while scanning string literal
  File "./run_experiment.py", line 532
    'bucket_id': ['0', '1', '2', '3'],
              ^
SyntaxError: invalid syntax
Using /users/ganton12/Router/ansible.cfg as config file

PLAY [Install Router] **********************************************************

TASK [Gathering Facts] *********************************************************
ok: [node1]

TASK [Install Router if not exists] ********************************************
ok: [node1] => {"changed": false, "dest": "/users/ganton12/", "gid": 7009, "group": "ramp-PG0", "handler": "TgzArchive", "mode": "0755", "owner": "ganton12", "size": 4096, "src": "/users/ganton12/.ansible/tmp/ansible-tmp-1668762966.06-7225-132429329960567/source", "state": "directory", "uid": 20001}

TASK [Set Up Docker Curl] ******************************************************
changed: [node1] => {"changed": true, "cmd": ["~/Router/scripts/set-up-docker.sh"], "delta": "0:00:49.425436", "end": "2022-11-18 03:16:57.248383", "rc": 0, "start": "2022-11-18 03:16:07.822947", "stderr": "Warning: the \"docker\" command appears to already exist on this system.\n\nIf you already have Docker installed, this script can cause trouble, which is\nwhy we're displaying this warning and provide the opportunity to cancel the\ninstallation.\n\nIf you installed the current Docker package using this script and are using it\nagain to update Docker, you can safely ignore this message.\n\nYou may press Ctrl+C now to abort this script.\n+ sleep 20\nWarning: the \"docker\" command appears to already exist on this system.\n\nIf you already have Docker installed, this script can cause trouble, which is\nwhy we're displaying this warning and provide the opportunity to cancel the\ninstallation.\n\nIf you installed the current Docker package using this script and are using it\nagain to update Docker, you can safely ignore this message.\n\nYou may press Ctrl+C now to abort this script.\n+ sleep 20\n+ sh -c apt-get update -qq >/dev/null\n+ sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl >/dev/null\n+ sh -c mkdir -p /etc/apt/keyrings && chmod -R 0755 /etc/apt/keyrings\n+ sh -c curl -fsSL \"https://download.docker.com/linux/ubuntu/gpg\" | gpg --dearmor --yes -o /etc/apt/keyrings/docker.gpg\ngpg: WARNING: unsafe ownership on homedir '/users/ganton12/.gnupg'\n+ sh -c chmod a+r /etc/apt/keyrings/docker.gpg\n+ sh -c echo \"deb [arch=amd64 signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu bionic stable\" > /etc/apt/sources.list.d/docker.list\n+ sh -c apt-get update -qq >/dev/null\n+ sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq --no-install-recommends docker-ce docker-ce-cli containerd.io docker-compose-plugin docker-scan-plugin >/dev/null\n+ version_gte 20.10\n+ [ -z  ]\n+ return 0\n+ sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq docker-ce-rootless-extras >/dev/null\n+ sh -c docker version", "stderr_lines": ["Warning: the \"docker\" command appears to already exist on this system.", "", "If you already have Docker installed, this script can cause trouble, which is", "why we're displaying this warning and provide the opportunity to cancel the", "installation.", "", "If you installed the current Docker package using this script and are using it", "again to update Docker, you can safely ignore this message.", "", "You may press Ctrl+C now to abort this script.", "+ sleep 20", "Warning: the \"docker\" command appears to already exist on this system.", "", "If you already have Docker installed, this script can cause trouble, which is", "why we're displaying this warning and provide the opportunity to cancel the", "installation.", "", "If you installed the current Docker package using this script and are using it", "again to update Docker, you can safely ignore this message.", "", "You may press Ctrl+C now to abort this script.", "+ sleep 20", "+ sh -c apt-get update -qq >/dev/null", "+ sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl >/dev/null", "+ sh -c mkdir -p /etc/apt/keyrings && chmod -R 0755 /etc/apt/keyrings", "+ sh -c curl -fsSL \"https://download.docker.com/linux/ubuntu/gpg\" | gpg --dearmor --yes -o /etc/apt/keyrings/docker.gpg", "gpg: WARNING: unsafe ownership on homedir '/users/ganton12/.gnupg'", "+ sh -c chmod a+r /etc/apt/keyrings/docker.gpg", "+ sh -c echo \"deb [arch=amd64 signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu bionic stable\" > /etc/apt/sources.list.d/docker.list", "+ sh -c apt-get update -qq >/dev/null", "+ sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq --no-install-recommends docker-ce docker-ce-cli containerd.io docker-compose-plugin docker-scan-plugin >/dev/null", "+ version_gte 20.10", "+ [ -z  ]", "+ return 0", "+ sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq docker-ce-rootless-extras >/dev/null", "+ sh -c docker version"], "stdout": "# Executing docker install script, commit: 4f282167c425347a931ccfd95cc91fab041d414f\napt-get update -qq >/dev/null\nDEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl >/dev/null\nmkdir -p /etc/apt/keyrings && chmod -R 0755 /etc/apt/keyrings\ncurl -fsSL \"https://download.docker.com/linux/ubuntu/gpg\" | gpg --dearmor --yes -o /etc/apt/keyrings/docker.gpg\nchmod a+r /etc/apt/keyrings/docker.gpg\necho \"deb [arch=amd64 signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu bionic stable\" > /etc/apt/sources.list.d/docker.list\napt-get update -qq >/dev/null\nDEBIAN_FRONTEND=noninteractive apt-get install -y -qq --no-install-recommends docker-ce docker-ce-cli containerd.io docker-compose-plugin docker-scan-plugin >/dev/null\nDEBIAN_FRONTEND=noninteractive apt-get install -y -qq docker-ce-rootless-extras >/dev/null\n# Executing docker install script, commit: 4f282167c425347a931ccfd95cc91fab041d414f\nClient: Docker Engine - Community\n Version:           20.10.21\n API version:       1.41\n Go version:        go1.18.7\n Git commit:        baeda1f\n Built:             Tue Oct 25 18:02:00 2022\n OS/Arch:           linux/amd64\n Context:           default\n Experimental:      true\n\nServer: Docker Engine - Community\n Engine:\n  Version:          20.10.21\n  API version:      1.41 (minimum version 1.12)\n  Go version:       go1.18.7\n  Git commit:       3056208\n  Built:            Tue Oct 25 17:59:53 2022\n  OS/Arch:          linux/amd64\n  Experimental:     false\n containerd:\n  Version:          1.6.10\n  GitCommit:        770bd0108c32f3fb5c73ae1264f7e503fe7b2661\n runc:\n  Version:          1.1.4\n  GitCommit:        v1.1.4-0-g5fd4c4d\n docker-init:\n  Version:          0.19.0\n  GitCommit:        de40ad0\n\n================================================================================\n\nTo run Docker as a non-privileged user, consider setting up the\nDocker daemon in rootless mode for your user:\n\n    dockerd-rootless-setuptool.sh install\n\nVisit https://docs.docker.com/go/rootless/ to learn about rootless mode.\n\n\nTo run the Docker daemon as a fully privileged service, but granting non-root\nusers access, refer to https://docs.docker.com/go/daemon-access/\n\nWARNING: Access to the remote API on a privileged Docker daemon is equivalent\n         to root access on the host. Refer to the 'Docker daemon attack surface'\n         documentation for details: https://docs.docker.com/go/attack-surface/\n\n================================================================================", "stdout_lines": ["# Executing docker install script, commit: 4f282167c425347a931ccfd95cc91fab041d414f", "apt-get update -qq >/dev/null", "DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl >/dev/null", "mkdir -p /etc/apt/keyrings && chmod -R 0755 /etc/apt/keyrings", "curl -fsSL \"https://download.docker.com/linux/ubuntu/gpg\" | gpg --dearmor --yes -o /etc/apt/keyrings/docker.gpg", "chmod a+r /etc/apt/keyrings/docker.gpg", "echo \"deb [arch=amd64 signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu bionic stable\" > /etc/apt/sources.list.d/docker.list", "apt-get update -qq >/dev/null", "DEBIAN_FRONTEND=noninteractive apt-get install -y -qq --no-install-recommends docker-ce docker-ce-cli containerd.io docker-compose-plugin docker-scan-plugin >/dev/null", "DEBIAN_FRONTEND=noninteractive apt-get install -y -qq docker-ce-rootless-extras >/dev/null", "# Executing docker install script, commit: 4f282167c425347a931ccfd95cc91fab041d414f", "Client: Docker Engine - Community", " Version:           20.10.21", " API version:       1.41", " Go version:        go1.18.7", " Git commit:        baeda1f", " Built:             Tue Oct 25 18:02:00 2022", " OS/Arch:           linux/amd64", " Context:           default", " Experimental:      true", "", "Server: Docker Engine - Community", " Engine:", "  Version:          20.10.21", "  API version:      1.41 (minimum version 1.12)", "  Go version:       go1.18.7", "  Git commit:       3056208", "  Built:            Tue Oct 25 17:59:53 2022", "  OS/Arch:          linux/amd64", "  Experimental:     false", " containerd:", "  Version:          1.6.10", "  GitCommit:        770bd0108c32f3fb5c73ae1264f7e503fe7b2661", " runc:", "  Version:          1.1.4", "  GitCommit:        v1.1.4-0-g5fd4c4d", " docker-init:", "  Version:          0.19.0", "  GitCommit:        de40ad0", "", "================================================================================", "", "To run Docker as a non-privileged user, consider setting up the", "Docker daemon in rootless mode for your user:", "", "    dockerd-rootless-setuptool.sh install", "", "Visit https://docs.docker.com/go/rootless/ to learn about rootless mode.", "", "", "To run the Docker daemon as a fully privileged service, but granting non-root", "users access, refer to https://docs.docker.com/go/daemon-access/", "", "WARNING: Access to the remote API on a privileged Docker daemon is equivalent", "         to root access on the host. Refer to the 'Docker daemon attack surface'", "         documentation for details: https://docs.docker.com/go/attack-surface/", "", "================================================================================"]}

TASK [Make Space to Commit Image] **********************************************
changed: [node1] => {"changed": true, "cmd": ["~/Router/scripts/change-storage-location-docker.sh"], "delta": "0:00:04.215112", "end": "2022-11-18 03:17:01.720149", "rc": 0, "start": "2022-11-18 03:16:57.505037", "stderr": "Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get \"http://%2Fvar%2Frun%2Fdocker.sock/v1.24/containers/json?all=1\": dial unix /var/run/docker.sock: connect: permission denied\n\"docker rm\" requires at least 1 argument.\nSee 'docker rm --help'.\n\nUsage:  docker rm [OPTIONS] CONTAINER [CONTAINER...]\n\nRemove one or more containers\nGot permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get \"http://%2Fvar%2Frun%2Fdocker.sock/v1.24/images/json\": dial unix /var/run/docker.sock: connect: permission denied\n\"docker rmi\" requires at least 1 argument.\nSee 'docker rmi --help'.\n\nUsage:  docker rmi [OPTIONS] IMAGE [IMAGE...]\n\nRemove one or more images\nWarning: Stopping docker.service, but it can still be activated by:\n  docker.socket\numount: /var/lib/docker: umount failed: Operation not permitted.\nrm: cannot remove '/var/lib/docker': Device or resource busy\nmkdir: cannot create directory ‘/var/lib/docker’: File exists\nmkdir: cannot create directory ‘/dev/mkdocker’: File exists", "stderr_lines": ["Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get \"http://%2Fvar%2Frun%2Fdocker.sock/v1.24/containers/json?all=1\": dial unix /var/run/docker.sock: connect: permission denied", "\"docker rm\" requires at least 1 argument.", "See 'docker rm --help'.", "", "Usage:  docker rm [OPTIONS] CONTAINER [CONTAINER...]", "", "Remove one or more containers", "Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get \"http://%2Fvar%2Frun%2Fdocker.sock/v1.24/images/json\": dial unix /var/run/docker.sock: connect: permission denied", "\"docker rmi\" requires at least 1 argument.", "See 'docker rmi --help'.", "", "Usage:  docker rmi [OPTIONS] IMAGE [IMAGE...]", "", "Remove one or more images", "Warning: Stopping docker.service, but it can still be activated by:", "  docker.socket", "umount: /var/lib/docker: umount failed: Operation not permitted.", "rm: cannot remove '/var/lib/docker': Device or resource busy", "mkdir: cannot create directory ‘/var/lib/docker’: File exists", "mkdir: cannot create directory ‘/dev/mkdocker’: File exists"], "stdout": "", "stdout_lines": []}

PLAY [Execute Router Container] ************************************************

TASK [Gathering Facts] *********************************************************
ok: [node1]

TASK [Change to docker group] **************************************************
[WARNING]: Consider using 'become', 'become_method', and 'become_user' rather
than running sudo
changed: [node1] => {"changed": true, "cmd": ["sudo", "newgrp", "docker"], "delta": "0:00:00.027136", "end": "2022-11-18 03:17:03.257345", "rc": 0, "start": "2022-11-18 03:17:03.230209", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

TASK [Compose Up Router] *******************************************************
changed: [node1] => {"changed": true, "cmd": ["~/Router/scripts/docker-compose-up.sh"], "delta": "0:10:31.304545", "end": "2022-11-18 03:27:34.809048", "rc": 0, "start": "2022-11-18 03:17:03.504503", "stderr": "", "stderr_lines": [], "stdout": "ab4cfdda97dd   mklean/baseline-microsuite:hdsearch_router   \"bash\"    7 seconds ago   Up 6 seconds   0.0.0.0:11211-11214->11211-11214/tcp, :::11211-11214->11211-11214/tcp, 0.0.0.0:50050-50055->50050-50055/tcp, :::50050-50055->50050-50055/tcp, 50056-50070/tcp   microsuite-hdsearch-1", "stdout_lines": ["ab4cfdda97dd   mklean/baseline-microsuite:hdsearch_router   \"bash\"    7 seconds ago   Up 6 seconds   0.0.0.0:11211-11214->11211-11214/tcp, :::11211-11214->11211-11214/tcp, 0.0.0.0:50050-50055->50050-50055/tcp, :::50050-50055->50050-50055/tcp, 50056-50070/tcp   microsuite-hdsearch-1"]}

PLAY RECAP *********************************************************************
node1                      : ok=7    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

ansible-playbook -v -i hosts -e ""  ansible/install.yml
Traceback (most recent call last):
  File "./run_experiment.py", line 552, in <module>
    if __name__ == '__main__':
  File "./run_experiment.py", line 549, in main
    for system_conf in system_confs:
  File "./run_experiment.py", line 468, in run_multiple_experiments
    start_remote()
  File "./run_experiment.py", line 289, in create_dataset
    sshProcess.stdin.write("sudo docker exec {} bash -c 'head -1000000 /home/twitter_requests_data_set.dat &> /home/twitter_requests_data_set_warmup' \n".format(container_id))
UnboundLocalError: local variable 'container_id' referenced before assignment
